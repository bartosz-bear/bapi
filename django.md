# Django

## How to start a development server?

```
python manage.py runserver
```

## How to start a server on a different port and/or different IP?

```
python manage.py runserver 8080

python manage.py runserver 0.0.0.0:8000
```

## How to exit a running server?

```
Ctrl + C
```

## Database Migrations

We have to run this command every time anything changes in the `models.py`

```powershell
python manage.py makemigrations # migrations preparation step

python manage.py migrate # apply migrations
```

The `migrate` command looks at the `INSTALLED_APPS` setting and creates any necessary database tables according to the database settings in your `mysite/settings.py`, as well as database migrations shipped with the app.

The reason that there are separate commands to make and apply migrations is because you’ll commit migrations to your version control system and ship them with your app; they not only make your development easier, they’re also usable by other developers and in production.

## How to see SQL code generated by Django?

`sqlmigrate` command doesn't actually run the migration on your database. Instead, it prints it to the screen so that you can see what SQL Django thinks is required. 

```
python manage.py sqlmigrate bapi_django_app 0001
```

## How to check if migrations will cause any issues without actually commiting?

```
python manage.py check
```

## How to set up PostgreSQL in Django?

<https://stackpython.medium.com/how-to-start-django-project-with-a-database-postgresql-aaa1d74659d8>

## How to create a new Django app?

```powershell
django-admin startproject my_new_appp
```

## Difference between a project and an app?

A project is a collection of configuration and apps for a particular website. An app is part of a website (project) which is responsible for a particular functionality (eg. a poll app or a database of public records).

## How `path(route, view, kwargs, name)` function works?

`route` is a string that contains a URL pattern. Patterns don't search `GET` and `POST` parameters, or the domain name. For example, in a request to `https://www.example.com/myapp/`, the URLconf will look for `myapp/`. In a request to `https://www.example.com/myapp/?page=3`, the URLconf will also look for `myapp/`.

`view` - when Django finds a matching pattern, it calls the specified view function with an `HttpRequest` object as the first argument and any 'captured' values from the `route` as keyword arguments.

`name` - naming your URL lets you refer to it unambiguously from elsewhere in Django, especially form within templates. This powerful feature allows you to make global changes to the URL patterns of your project while only touching a single file.

## How to start Django console?

```
python manage.py shell
```

## Django Database Guide

### Basic Tutorial to Database API

<https://docs.djangoproject.com/en/4.1/intro/tutorial02/#playing-with-the-api>

### More on Database Model Relations

<https://docs.djangoproject.com/en/4.1/ref/models/relations/>

### Field Lookups (double underscores)

<https://docs.djangoproject.com/en/4.1/topics/db/queries/#field-lookups-intro>

### Database API Reference

<https://docs.djangoproject.com/en/4.1/topics/db/queries/>

## Views

A view is a type of web page that generally serves a specific function and has a specific template.

Eg. in a blog application, you might have separate views for:
- blog homepage
- year-based archive page
- blog post entry page

Each view is represented by a Python function (or method, in the case of class-based views). Django will choose a view by examining the URL that's requested (to be precise, teh part of the URL after the domain name).

A URL pattern is the general form of a URL: `/newsarchive/<year>/<month>`

URLconf maps URL patterns to views.

## `render()` shortcut

`render()` is a very common idiom to load a template, fill a context and return an `HttpResponse` object with the result of the rendered template.