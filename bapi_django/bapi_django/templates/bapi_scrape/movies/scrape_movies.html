{% extends "base.html" %}   // Inherits all the components from base template, including the header and footer

{% block main %}

<main>


    
    <div class="reading">

        <h2 id="movies-swap">Scraping movies</h2><br>

        <button hx-post="/scrape/movies/run_spider"
          hx-trigger="click"
          hx-target="#movies"
          onclick="move()">
          Run spider
        </button>

        <br><br>

        <div id="myProgress">
          <div id="myBar"></div>
        </div>
        
        <br>

        <div id="movies"></div>

    </div>

</main>

{% load static %}

<script src="https://unpkg.com/htmx.org@1.8.6"></script>

<script>
  var i = 0;
  function move() {
    if (i == 0) {
      i = 1;
      var elem = document.getElementById("myBar");
      var width = 1;
      var id = setInterval(frame, 165);
      function frame() {
        if (width >= 100) {
          clearInterval(id);
          i = 0;
        } else {
          width++;
          elem.style.width = width + "%";
        }
      }
    }
  }
  </script>

{% endblock %}

{% block style %}

<style>
  body {
    background: white;
  }
  .box {
    width: 100%;
    height: 100%;
    border: 1px solid white;
    display: flex;
    justify-content: center;
  }
  img {
    width: 80%;
    height: 100%;
    margin: 0 auto;
  }

  .table {
    table-layout:fixed;
  }

  .table th {
    color: white;
  }

  .table td {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  div.reading {
    width: 800px;
    margin: 0 auto;
  }

  #myProgress {
    width: 100%;
    background-color: #ddd;
  }

  #myBar {
    width: 1%;
    height: 30px;
    background-color: #04AA6D;
  }
</style>

{% endblock %}
